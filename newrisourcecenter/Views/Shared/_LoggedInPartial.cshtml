@{
    if (User.IsInRole("Super Admin"))
    {
        Session["siteRole"] = "1";
    }
    else if (User.IsInRole("Local Admin"))
    {
        Session["siteRole"] = "2";
    }
    else if (User.IsInRole("Global Admin"))
    {
        Session["siteRole"] = "6";
    }
    else
    {
        Session["siteRole"] = "60";
    }

    int count = newrisourcecenter.Models.OldMenu.Items.Count();
    int x = 0;
    string siteRole = Convert.ToString(Session["siteRole"]);
    long adminRole = Convert.ToInt64(Session["userRole"]);
    string userIndustry = Convert.ToString(Session["userIndustry"]);
    string usrType = Convert.ToString(Session["companyType"]);
    string usrProducts = Convert.ToString(Session["userProducts"]);
    int languageId = Convert.ToInt32(Session["userLanguageId"]);
    int countryId = Convert.ToInt32(Session["userCountryId"]);
    string pass = Convert.ToString(Session["userPassword"]);
    string fName = Convert.ToString(Session["firstName"]);
    string lName = Convert.ToString(Session["lastName"]);
    string phone = Convert.ToString(Session["phone"]);
    string state = Convert.ToString(Session["state"]);
    string add1 = Convert.ToString(Session["add1"]);
    string city = Convert.ToString(Session["city"]);
    string zip = Convert.ToString(Session["zip"]);
    string email = Convert.ToString(Session["email"]);
    int comp_MDF = Convert.ToInt32(Session["comp_MDF"]);
    int comp_SPA = Convert.ToInt32(Session["comp_SPA"]);
    int comp_POS = Convert.ToInt32(Session["comp_POS"]);
    string my_pages = Convert.ToString(Session["userPages"]);
    long companyType = Convert.ToInt64(Session["companyType"]);
    bool isPinnacle = Convert.ToBoolean(Session["isPinnacleUser"]);
    string[] user_pages = { };
    if (my_pages != null)
    {
        user_pages = my_pages.Split(',');
    }
}
@using Microsoft.AspNet.Identity;
@{
    long companyId = Convert.ToInt64(Session["companyId"]);
    long userId = Convert.ToInt64(Session["userId"]);
}
<!--Start of search forms and Logo-->
<div id="header">
    <div class="topmenu-wrapper">
        <div class="mobile-logo">
            <a title="To the Rittal homepage" href="https://rittal.com/com-en"><img alt="Rittal" src="https://www.rittal.com/imf/none/80_118/"></a>
        </div><a target="_self" id="mobile_search" title="Search" class="mobile-search glyphicon glyphicon-search"><span class="icon-button-wrapper ricon-after-search"><!----></span></a>
    </div>
    <div class="sidenav">
        <div class="top-logo-wrapper">
            <div class="claim">
                <a title="To the Rittal homepage" href="@(!isPinnacle ? "/Home?n1_name=Home" : "/MDFViewPinnacle")" class="claim-link">
                    <img alt="Rittal â€“ The System." src="~/images/80_1157.png">
                </a>
            </div>
            <div style="display:inline;font-size:12px;color:#fff;">
                @using Microsoft.AspNet.Identity
                @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm", @class = "navbar-right" }))
                {
                    @Html.AntiForgeryToken()

                    @Html.ActionLink("Hello " + User.Identity.GetUserName(), "Edit", "UserViewModels", routeValues: new { id = userId, n1_name = "Admin Users", msg = User.Identity.GetUserName(), compid = companyId, user_ID = userId, n2_name = "SAP Accounts" }, htmlAttributes: new { title = "Edit my account", style = "color:#fff;" })

                    <a id="logout" href="javascript:document.getElementById('logoutForm').submit()"><span class="glyphicon glyphicon-log-out"></span> Log off</a>
                }
            </div>
        </div>
        @if (!isPinnacle)
        {
            <div class="navigation-menu-wrapper hidden-xs">
                <div class="top-navigation-menu">
                    @{
                        foreach (var item in newrisourcecenter.Controllers.MenuContoller.TopMenu(User.Identity.GetUserName(), languageId, countryId))
                        {

                            var classActive = "";
                            if (Request.RawUrl.Contains(item.Controller))
                            {
                                classActive = "active parentlink";
                            }
                            else
                            {
                                classActive = "parentlink";
                            }

                            if (item.Id == 0)
                            {
                                var className = item.LinkID + "_menu_show";
                                var idName = item.LinkID + "_menu";
                                int id = item.Id;
                                string[] arg = { item.PageName, item.Controller };

                                <div class="top_nav1">
                                    <span id="@item.LinkID" class="@classActive" onclick="toggleMenu(this.id)">@item.Name</span>
                                    <i class="glyphicon glyphicon-chevron-down"></i>
                                    <div id="@idName" class="@className submenu">
                                        <div class="submenu-wrapper">
                                            <a role="button" tabindex="0" title="one menu level back" class="sublink overview-link ricon-arrow_left mobile-only" style="justify-content: end;">Back</a>
                                            @{
                                                var submenudata = newrisourcecenter.Controllers.MenuContoller.SubMenu(id, arg, User.Identity.GetUserName(), languageId, usrType, userIndustry, usrProducts, siteRole);
                                                newrisourcecenter.Models.SectionsCounts getcount = newrisourcecenter.Controllers.MenuContoller.partcounts(submenudata, siteRole, user_pages);

                                                int z = 0;



                                                @*<div id="Submenutitle"> @item.Name</div>*@
                                                <div class="submenu-layer-wrapper">
                                                    <a href="~/Home?n1_name=Home" class="headerlink"><span>@item.Name</span></a>
                                                    @{
                                                        foreach (var submenu in submenudata)
                                                        {
                                                            if (submenu.Order == 1 && @getcount.nav_settings != 0)
                                                            {
                                                                <a id=@submenu.Order role="button" title="subcategory" target="_self" onclick="toggleSubMenu(this.id);return false;" class="sublink ricon-after-arrow_right"><span class="mobile-label">Navigation Settings</span></a>
                                                            }
                                                            else if (submenu.Order == 20 && @getcount.user_settings != 0)
                                                            {
                                                                <a id=@submenu.Order role="button" title="subcategory" target="_self" class="sublink ricon-after-arrow_right" onclick="toggleSubMenu(this.id);return false;"><span class="mobile-label">Manage Users Settings</span></a>
                                                                @*<br clear="all" /><h6 style="text-align:center;text-decoration:none;color:#93117E;">Manage Users Settings </h6>*@
                                                            }
                                                            else if (submenu.Order == 40 && @getcount.partner_settings != 0)
                                                            {
                                                                <a id=@submenu.Order role="button" title="subcategory" target="_self" onclick="toggleSubMenu(this.id);return false;" class="sublink ricon-after-arrow_right"><span class="mobile-label">Manage Partner Company</span></a>
                                                            }
                                                            else if (submenu.Order == 60 && @getcount.risource != 0)
                                                            {
                                                                <a id=@submenu.Order role="button" title="subcategory" target="_self" onclick="toggleSubMenu(this.id);return false;" class="sublink ricon-after-arrow_right"><span class="mobile-label">Manage RiSources</span></a>
                                                                @*<br clear="all" /><h6 style="text-align:center;text-decoration:none;color:#E50043">Manage RiSources</h6>*@
                                                            }
                                                            else if (submenu.Order == 80 && @getcount.support_settings != 0)
                                                            {
                                                                <a id=@submenu.Order role="button" title="subcategory" target="_self" onclick="toggleSubMenu(this.id);return false;" class="sublink ricon-after-arrow_right"><span class="mobile-label">Manage Support Tools</span></a>
                                                                @*<br clear="all" /><h6 style="text-align:center;text-decoration:none;color:#008BD0">Manage Support Tools </h6>*@
                                                            }
                                                            else if (submenu.Order == 100 && @getcount.communications != 0)
                                                            {
                                                                <a id=@submenu.Order role="button" title="subcategory" target="_self" onclick="toggleSubMenu(this.id);return false;" class="sublink ricon-after-arrow_right"><span class="mobile-label">Manage Sales Communication</span></a>
                                                                @*<br clear="all" /><h6 style="text-align:center;text-decoration:none;color: #008E4F;">Manage Sales Communication </h6>*@
                                                            }
                                                            else if (submenu.Order == 120 && @getcount.rittal_uni != 0)
                                                            {
                                                                <a id=@submenu.Order role="button" title="subcategory" target="_self" onclick="toggleSubMenu(this.id);return false;" class="sublink ricon-after-arrow_right"><span class="mobile-label">Manage Rittal University</span></a>
                                                                @*<br clear="all" /><h6 style="text-align:center;text-decoration:none;color:#008E4F;">Manage Rittal University </h6>*@
                                                            }
                                                        }

                                                    }
                                                </div>
                                                <div class="submenu-sublayer-wrapper hide">
                                                    <a role="button" tabindex="0" title="one menu level back" class="sublink overview-link ricon-arrow_left" style="justify-content: end; ">Back</a>

                                                    @{
                                                        foreach (var submenu in submenudata)
                                                        {
                                                            var routeValues = new RouteValueDictionary();
                                                            routeValues.Add("parentId", "" + submenu.ParentId + "");
                                                            routeValues.Add("childId", "" + submenu.ChildId + "");
                                                            routeValues.Add("n1_name", "" + submenu.Name + "");
                                                            routeValues.Add("submenu", "yes");
                                                            int? ordernumber = 1;
                                                            if (submenu.Order >= 20 && submenu.Order < 40)
                                                            {
                                                                ordernumber = 20;
                                                            }
                                                            else if (submenu.Order >= 40 && submenu.Order < 120)
                                                            {
                                                                ordernumber = 40;
                                                            }
                                                            //else if (submenu.Order >= 60 && submenu.Order < 80 && @getcount.risource != 0)
                                                            //{
                                                            //    ordernumber = 60;
                                                            //}
                                                            //else if (submenu.Order >= 80 && submenu.Order < 100 && @getcount.support_settings != 0)
                                                            //{
                                                            //    ordernumber = 80;
                                                            //}
                                                            //else if (submenu.Order >= 100 && submenu.Order < 120 && @getcount.communications != 0)
                                                            //{
                                                            //    ordernumber = 100;
                                                            //}
                                                            else if (submenu.Order >= 120 && @getcount.rittal_uni != 0)
                                                            {
                                                                ordernumber = 120;
                                                            }
                                                            var attributes = new Dictionary<string, object>
                                                                ();
                                                            attributes.Add("title", "" + @submenu.Name + "");
                                                            string sClasses = item.LinkID + " menu_" + ordernumber + " parentlink";

                                                            if (Request.RawUrl.Contains(submenu.Controller))
                                                            {
                                                                sClasses += " active";
                                                            }
                                                            attributes.Add("class", sClasses);

                                                            if (submenu.Usrgroup == null)
                                                            {
                                                                if (@submenu.redirect != null || @submenu.n2_redirectJS != null)
                                                                {
                                                                    <a href="@submenu.redirect" onclick="@submenu.n2_redirectJS" title="@submenu.Name" class="@sClasses">@submenu.Name</a>
                                                                }
                                                                else
                                                                {
                                                                    @Html.ActionLink("" + submenu.Name + "", "" + submenu.PageName + "", "" + submenu.Controller + "", routeValues, attributes)
                                                                }
                                                            }
                                                            else if (submenu.Usrgroup.Contains(siteRole) || user_pages.Contains(submenu.ChildId.ToString()))
                                                            {
                                                                if (@submenu.redirect != null || @submenu.n2_redirectJS != null)
                                                                {
                                                                    <a href="@submenu.redirect" onclick="@submenu.n2_redirectJS" title="@submenu.Name" class="@sClasses">@submenu.Name</a>
                                                                }
                                                                else
                                                                {
                                                                    @Html.ActionLink("" + submenu.Name + "", "" + submenu.PageName + "", "" + submenu.Controller + "", routeValues, attributes)
                                                                }
                                                            }

                                                            z++;
                                                        }

                                                    }
                                                </div>
                                            }

                                        </div>
                                    </div>
                                </div>
                                @*<a href="~/Home?n1_name=Home" class="@classActive">@item.Name</a>*@
                                @*<span id="@item.LinkID" onclick="toggleMenu(this.id)">&#9660;</span>*@
                            }

                            if (item.Id != 0)
                            {
                                var className = item.LinkID + "_menu_show";
                                var idName = item.LinkID + "_menu";
                                int id = item.Id;
                                string[] arg = { item.PageName, item.Controller };
                                var proformaURL = String.Format("https://www.mpgstore.com/rittal/signin_external.aspx?Email={0}&group={1}&fname={2}&lname={3}&phone={4}&address={5}&city={6}&state={7}&zip={8}", User.Identity.Name, companyType, fName, lName, phone, add1, city, state, zip);
                                //var proformaURL = String.Format("https://proformaprostores.com/LogonLink/09f4a948-1116-e611-80cb-0025907fdf4b?userName={0}&password={1}&firstName={2}&lastName={3}&emailAddress={4}&phoneNumber={5}", User.Identity.GetUserName(), "rittalusa", fName, lName, User.Identity.GetUserName(), phone);

                                <div class="top_nav1">
                                    @if (item.Controller == "SupportTools" || item.Controller == "LinksView")
                                    {
                                        @Html.ActionLink("" + @item.Name + "", "" + @item.PageName + "", "" + @item.Controller + "", new { n1_name = item.Name }, htmlAttributes: new { title = "" + @item.Name + "", @class = classActive, id = @item.LinkID, @onclick = "toggleMenu(this.id);return false;" })
                                    }
                                    else
                                    {
                                        @Html.ActionLink("" + @item.Name + "", "" + @item.PageName + "", "" + @item.Controller + "", new { n1_name = item.Name }, htmlAttributes: new { title = "" + @item.Name + "", @class = classActive, id = @item.LinkID, @onclick = "toggleMenu(this.id);return false;" })
                                    }
                                    <i class="glyphicon glyphicon-chevron-down"></i>
                                    @*<span id="@item.LinkID" onclick="toggleMenu(this.id)">&#9660;</span>*@
                                    @*<span id="@item.LinkID" onclick="toggleMenu(this.id)"></span>*@
                                    @*<span id="@item.LinkID" onclick="toggleMenu(this.id)">@item.Name </span>*@
                                    <div id="@idName" class="@className submenu">
                                        <div class="submenu-wrapper">
                                            <div class="submenu-layer-wrapper">
                                                @{
                                                    @Html.ActionLink("" + @item.Name + "", "" + @item.PageName + "", "" + @item.Controller + "", new { n1_name = item.Name }, htmlAttributes: new { title = "" + @item.Name + "", @class = "headerlink " + classActive, })
                                                    foreach (var submenu in newrisourcecenter.Controllers.MenuContoller.SubMenu(id, arg, User.Identity.GetUserName(), languageId, usrType, userIndustry, usrProducts, siteRole))
                                                    {

                                                        var routeValues = new RouteValueDictionary();
                                                        routeValues.Add("parentId", "" + submenu.ParentId + "");
                                                        routeValues.Add("childId", "" + submenu.ChildId + "");
                                                        routeValues.Add("n1_name", "" + item.Name + "");
                                                        routeValues.Add("n2_name", "" + submenu.Name + "");
                                                        routeValues.Add("submenu", "yes");
                                                        var attributes = new Dictionary<string, object>();
                                                        if (!string.IsNullOrEmpty(Request.QueryString["n2_name"]))
                                                        {
                                                            if (Request.QueryString["n2_name"] == submenu.Name)
                                                            {
                                                                attributes.Add("class", "" + item.LinkID + " active" + "");
                                                            }
                                                            else
                                                            {
                                                                attributes.Add("class", "" + item.LinkID + "");
                                                            }
                                                        }
                                                        if (submenu.Controller == "BidRegistration")
                                                        {
                                                            attributes.Add("target", "_blank");
                                                        }

                                                        if (submenu.Usrgroup == null && submenu.ChildId != 6)
                                                        {
                                                            if (@submenu.redirect != null || @submenu.n2_redirectJS != null)
                                                            {
                                                                //Redirect settings
                                                                if (submenu.Controller == "Links")
                                                                {
                                                                    <a href="@submenu.redirect" target="_blank">@submenu.Name</a>
                                                                }
                                                                else
                                                                {
                                                                    <a href="@submenu.redirect" onclick="@submenu.n2_redirectJS">@submenu.Name</a>
                                                                }
                                                            }
                                                            else
                                                            {
                                                                @Html.ActionLink("" + submenu.Name + "", "" + submenu.PageName + "", "" + submenu.Controller + "", routeValues, attributes)
                                                            }
                                                        }
                                                        else if (submenu.ChildId == 6)
                                                        {
                                                            //This link is for brand central
                                                            if (user_pages.Contains(submenu.ChildId.ToString()))
                                                            {
                                                                @Html.ActionLink("" + submenu.Name + "", "" + submenu.PageName + "", "" + submenu.Controller + "", routeValues, attributes)
                                                            }
                                                        }
                                                        else if (submenu.Usrgroup.Contains(siteRole) || user_pages.Contains(submenu.ChildId.ToString()))
                                                        {

                                                            if (@submenu.redirect != null || @submenu.n2_redirectJS != null)
                                                            {
                                                                //Redirect settings
                                                                if (submenu.Controller == "Links")
                                                                {
                                                                    <a href="@submenu.redirect" target="_blank">@submenu.Name</a>
                                                                }
                                                                else
                                                                {
                                                                    <a href="@submenu.redirect" onclick="@submenu.n2_redirectJS">@submenu.Name</a>
                                                                }
                                                            }
                                                            else
                                                            {
                                                                @Html.ActionLink("" + submenu.Name + "", "" + submenu.PageName + "", "" + submenu.Controller + "", routeValues, attributes)
                                                            }
                                                        }
                                                    }
                                                }
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }

                            x++;
                        }
                    }
                </div>
                <div class="show-page-search hide">
                    <form id="search" action="~/search/index" method="get">

                        <div id="searchTypes">
                            <u>Search by :</u>
                            <ul>
                                <li>User email</li>
                                <li>User first Name</li>
                                <li>User Last Name</li>
                                <li>Partner Company</li>
                                <li>Partner Location</li>
                                <li>Sales Communications</li>
                                <li>RiSource</li>
                            </ul>
                        </div>
                        <input type="hidden" name="onlySalesComm" value="@Request.QueryString["onlySalesComm"]" />
                        <input type="hidden" name="onlyRiSource" value="@Request.QueryString["onlyRiSource"]" />
                        <input type="hidden" name="onlyUsers" value="@Request.QueryString["onlyUsers"]" />
                        <input type="hidden" name="onlyPartComp" value="@Request.QueryString["onlyPartComp"]" />
                        <input type="hidden" name="onlyPartLoc" value="@Request.QueryString["onlyPartLoc"]" />
                        <input type="text" name="msg" value="@Request.QueryString["msg"]" placeholder="Rittal Search:" id="searchbox">
                        <input type="hidden" value="You Searched for" name="n1_name" />
                        @if (Request.QueryString["all"] == null)
                        {
                            <input type="hidden" value="all" name="all" />
                        }
                        else
                        {
                            <input type="hidden" value="" name="all" />
                        }
                        <button class="search glyphicon glyphicon-search "></button>
                        <a href="#" class="glyphicon glyphicon-info-sign" id="tooltip" style="position: absolute; right: -10px; color: #E50043;"></a>
                        <div id="search_results">this is the results</div>
                    </form>
                </div>
            </div>

        }

        <div class="mobile-menu-footer">
            @using Microsoft.AspNet.Identity
            @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm", @class = "navbar-right" }))
            {
                @Html.AntiForgeryToken()

                @Html.ActionLink("Hello " + User.Identity.GetUserName(), "Edit", "UserViewModels", routeValues: new { id = userId, n1_name = "Admin Users", msg = User.Identity.GetUserName(), compid = companyId, user_ID = userId, n2_name = "SAP Accounts" }, htmlAttributes: new { title = "Edit my account" })
                <br>
                <a id="logout" href="javascript:document.getElementById('logoutForm').submit()"><span class="glyphicon glyphicon-log-out"></span> Log off</a>
            }
        </div>
    </div>
    @if (!isPinnacle)
    {
        <div class="visible-xs">
            <div class="navbar navbar-default">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mobile-navbar" aria-expanded="false">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a title="To the Rittal homepage" href="https://rittal.com/com-en" style="display: inline-block;margin-top: 8px;"><img alt="Rittal" src="https://www.rittal.com/imf/none/80_118/"></a>
                    </div>
                    <div class="collapse navbar-collapse" id="mobile-navbar">
                        <ul class="navbar-nav nav">
                            @{
                                foreach (var item in newrisourcecenter.Controllers.MenuContoller.TopMenu(User.Identity.GetUserName(), languageId, countryId))
                                {

                                    var classActive = "";
                                    if (Request.RawUrl.Contains(item.Controller))
                                    {
                                        classActive = "active dropdown";
                                    }
                                    else
                                    {
                                        classActive = "dropdown";
                                    }

                                    if (item.Id == 0)
                                    {
                                        var className = item.LinkID + "_menu_show";
                                        var idName = item.LinkID + "_menu";
                                        int id = item.Id;
                                        string[] arg = { item.PageName, item.Controller };

                                        <li class="@classActive">
                                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">@item.Name <span class="caret"></span></a>
                                            <ul class="dropdown-menu">
                                                @{
                                                    var submenudata = newrisourcecenter.Controllers.MenuContoller.SubMenu(id, arg, User.Identity.GetUserName(), languageId, usrType, userIndustry, usrProducts, siteRole);
                                                    newrisourcecenter.Models.SectionsCounts getcount = newrisourcecenter.Controllers.MenuContoller.partcounts(submenudata, siteRole, user_pages);
                                                    Dictionary<int, string> manageMenus = new Dictionary<int, string>();
                                                    Dictionary<int, string> manageSubmenus = new Dictionary<int, string>();
                                                    int z = 0;
                                                    foreach (var submenu in submenudata)
                                                    {
                                                        if (submenu.Order == 1 && @getcount.nav_settings != 0)
                                                        {
                                                            manageMenus[1] = "<a href='#' class='dropdown-submenu-toggle' role='button' aria-haspopup='true' aria-expanded='false'>Navigation Settings <span class='caret'></span></a>";
                                                            continue;
                                                        }
                                                        else if (submenu.Order == 20 && @getcount.user_settings != 0)
                                                        {
                                                            manageMenus[20] = "<a href='#' class='dropdown-submenu-toggle' role='button' aria-haspopup='true' aria-expanded='false'>Manage Users Settings <span class='caret'></span></a>";
                                                            continue;
                                                        }
                                                        else if (submenu.Order == 40 && @getcount.partner_settings != 0)
                                                        {
                                                            manageMenus[40] = "<a href='#' class='dropdown-submenu-toggle' role='button' aria-haspopup='true' aria-expanded='false'>Manage Partner Company <span class='caret'></span></a>";
                                                            continue;
                                                        }
                                                        else if (submenu.Order == 60 && @getcount.risource != 0)
                                                        {
                                                            manageMenus[60] = "<a href='#' class='dropdown-submenu-toggle' role='button' aria-haspopup='true' aria-expanded='false'>Manage RiSources <span class='caret'></span></a>";
                                                            continue;
                                                        }
                                                        else if (submenu.Order == 80 && @getcount.support_settings != 0)
                                                        {
                                                            manageMenus[80] = "<a href='#' class='dropdown-submenu-toggle' role='button' aria-haspopup='true' aria-expanded='false'>Manage Support Tools <span class='caret'></span></a>";
                                                            continue;
                                                        }
                                                        else if (submenu.Order == 100 && @getcount.communications != 0)
                                                        {
                                                            manageMenus[100] = "<a href='#' class='dropdown-submenu-toggle' role='button' aria-haspopup='true' aria-expanded='false'>Manage Sales Communications <span class='caret'></span></a>";
                                                            continue;
                                                        }
                                                        else if (submenu.Order == 120 && @getcount.rittal_uni != 0)
                                                        {
                                                            manageMenus[120] = "<a href='#' class='dropdown-submenu-toggle' role='button' aria-haspopup='true' aria-expanded='false'>Manage Rittal University <span class='caret'></span></a>";
                                                            continue;
                                                        }

                                                        var routeValues = new RouteValueDictionary();
                                                        routeValues.Add("parentId", "" + submenu.ParentId + "");
                                                        routeValues.Add("childId", "" + submenu.ChildId + "");
                                                        routeValues.Add("n1_name", "" + submenu.Name + "");
                                                        routeValues.Add("submenu", "yes");
                                                        int? ordernumber = 1;
                                                        if (submenu.Order >= 20 && submenu.Order < 40)
                                                        {
                                                            ordernumber = 20;
                                                        }
                                                        else if (submenu.Order >= 40 && submenu.Order < 120)
                                                        {
                                                            ordernumber = 40;
                                                        }
                                                        else if (submenu.Order >= 120 && @getcount.rittal_uni != 0)
                                                        {
                                                            ordernumber = 120;
                                                        }

                                                        var attributes = new Dictionary<string, object>();
                                                        attributes.Add("title", "" + @submenu.Name + "");
                                                        string sClasses = item.LinkID + " menu_" + ordernumber + " parentlink";

                                                        if (Request.RawUrl.Contains(submenu.Controller))
                                                        {
                                                            sClasses += " active";
                                                        }
                                                        attributes.Add("class", sClasses);

                                                        if (submenu.Usrgroup == null || submenu.Usrgroup.Contains(siteRole) || user_pages.Contains(submenu.ChildId.ToString()))
                                                        {
                                                            if (!manageSubmenus.ContainsKey(ordernumber.Value))
                                                            {
                                                                manageSubmenus[ordernumber.Value] = "";
                                                            }
                                                            if (@submenu.redirect != null || @submenu.n2_redirectJS != null)
                                                            {
                                                                manageSubmenus[ordernumber.Value] += "<li><a href='" + @submenu.redirect + "' onclick='" + @submenu.n2_redirectJS + "' title='" + @submenu.Name + "' class='" + @sClasses + "'>" + @submenu.Name + "</a></li>";
                                                            }
                                                            else
                                                            {
                                                                manageSubmenus[ordernumber.Value] += "<li>" + Html.ActionLink("" + submenu.Name + "", "" + submenu.PageName + "", "" + submenu.Controller + "", routeValues, attributes) + "</li>";
                                                            }
                                                        }
                                                    }
                                                    foreach (KeyValuePair<int, string> menu in manageMenus)
                                                    {
                                                        if (!manageSubmenus.ContainsKey(menu.Key))
                                                        {
                                                            continue;
                                                        }
                                                        <li class="dropdown-submenu">
                                                            @Html.Raw(menu.Value)
                                                            <ul class="dropdown-menu">
                                                                @Html.Raw(manageSubmenus[menu.Key])
                                                            </ul>
                                                        </li>
                                                        
                                                    }
                                                }
                                            </ul>
                                        </li>
                                    }

                                    if (item.Id != 0)
                                    {

                                        var idName = item.LinkID + "_menu";
                                        int id = item.Id;
                                        string[] arg = { item.PageName, item.Controller };
                                        var proformaURL = String.Format("https://www.mpgstore.com/rittal/signin_external.aspx?Email={0}&group={1}&fname={2}&lname={3}&phone={4}&address={5}&city={6}&state={7}&zip={8}", User.Identity.Name, companyType, fName, lName, phone, add1, city, state, zip);
                                        <li class="@classActive">

                                            @Html.Raw("<a href='" + Url.Action(item.PageName, item.Controller) + "' class='dropdown-toggle' data-toggle='dropdown' role='button' aria-haspopup='true' aria-expanded='false'>" + item.Name + "<span class='caret'></span></a>")
                                            <ul class="dropdown-menu">
                                                @{
                                                    foreach (var submenu in newrisourcecenter.Controllers.MenuContoller.SubMenu(id, arg, User.Identity.GetUserName(), languageId, usrType, userIndustry, usrProducts, siteRole))
                                                    {

                                                        var routeValues = new RouteValueDictionary();
                                                        routeValues.Add("parentId", "" + submenu.ParentId + "");
                                                        routeValues.Add("childId", "" + submenu.ChildId + "");
                                                        routeValues.Add("n1_name", "" + item.Name + "");
                                                        routeValues.Add("n2_name", "" + submenu.Name + "");
                                                        routeValues.Add("submenu", "yes");
                                                        var attributes = new Dictionary<string, object>();
                                                        if (!string.IsNullOrEmpty(Request.QueryString["n2_name"]))
                                                        {
                                                            if (Request.QueryString["n2_name"] == submenu.Name)
                                                            {
                                                                attributes.Add("class", "" + item.LinkID + " active" + "");
                                                            }
                                                            else
                                                            {
                                                                attributes.Add("class", "" + item.LinkID + "");
                                                            }
                                                        }
                                                        if (submenu.Controller == "BidRegistration")
                                                        {
                                                            attributes.Add("target", "_blank");
                                                        }

                                                        if (submenu.Usrgroup == null && submenu.ChildId != 6)
                                                        {
                                                            if (@submenu.redirect != null || @submenu.n2_redirectJS != null)
                                                            {
                                                                //Redirect settings
                                                                if (submenu.Controller == "Links")
                                                                {
                                                                    <li><a href="@submenu.redirect" target="_blank">@submenu.Name</a></li>
                                                                }
                                                                else
                                                                {
                                                                    <li><a href="@submenu.redirect" onclick="@submenu.n2_redirectJS">@submenu.Name</a></li>
                                                                }
                                                            }
                                                            else
                                                            {
                                                                <li>@Html.ActionLink("" + submenu.Name + "", "" + submenu.PageName + "", "" + submenu.Controller + "", routeValues, attributes)</li>
                                                            }
                                                        }
                                                        else if (submenu.ChildId == 6)
                                                        {
                                                            //This link is for brand central
                                                            if (user_pages.Contains(submenu.ChildId.ToString()))
                                                            {
                                                                <li>@Html.ActionLink("" + submenu.Name + "", "" + submenu.PageName + "", "" + submenu.Controller + "", routeValues, attributes)</li>
                                                            }
                                                        }
                                                        else if (submenu.Usrgroup.Contains(siteRole) || user_pages.Contains(submenu.ChildId.ToString()))
                                                        {

                                                            if (@submenu.redirect != null || @submenu.n2_redirectJS != null)
                                                            {
                                                                //Redirect settings
                                                                if (submenu.Controller == "Links")
                                                                {
                                                                    <li><a href="@submenu.redirect" target="_blank">@submenu.Name</a></li>
                                                                }
                                                                else
                                                                {
                                                                    <li><a href="@submenu.redirect" onclick="@submenu.n2_redirectJS">@submenu.Name</a></li>
                                                                }
                                                            }
                                                            else
                                                            {
                                                                <li>@Html.ActionLink("" + submenu.Name + "", "" + submenu.PageName + "", "" + submenu.Controller + "", routeValues, attributes)</li>
                                                            }
                                                        }
                                                    }
                                                }
                                            </ul>
                                        </li>
                                    }

                                    x++;
                                }
                            }
                        </ul>
                    </div>

                </div>
            </div>
        </div>
    }

    <script>
        jQuery(document).ready(function () {
            $('.sidenav').addClass("sidenav_mb");
        });


        $(window).scroll(function (event) {
            function footer() {
                var scroll = $(window).scrollTop();
                if (scroll > 50) {
                    $(".powerline-rail").animate({
                        bottom: '10',
                    });
                    $(".powerline-logo-cover").animate({
                        bottom: '50px',
                        right: '17vh',
                    });

                }
                else {
                    $(".powerline-rail").animate({
                        bottom: '50',
                    });
                    $(".powerline-logo-cover").animate({
                        bottom: '91px',
                        right: '19vh',
                    });
                }

                //clearTimeout($.data(this, 'scrollTimer'));
                //$.data(this, 'scrollTimer', setTimeout(function () {
                //    if ($('#footer').is(':hover')) {
                //        footer();
                //    }
                //    else {
                //        $("#footer").fadeOut("slow");
                //    }
                //}, 2000));
            }
            footer();
        });

        $(".btn_close_menu,.btn_back_menu").click(function () {
            var content_id = $(this).parents(".submenu").attr("id");
            var allTopMenuList = $("div.submenu").get();
            for (var i = 0; i < allTopMenuList.length; i++) {
                var itemid = $("div.submenu").get()[i].id;
                if (!$("#" + itemid).hasClass()) {
                    $("#" + itemid).addClass(itemid + "_show");

                }
            }
        });

        $(".overview-link").click(function () {
            var parent = $(this).parents(".submenu-wrapper");
            var content_id = $(".submenu-layer-wrapper", parent);
            content_id.removeClass("hide");
            $('.submenu-sublayer-wrapper', parent).addClass('hide');
        });
    </script>
    <script type="text/javascript">
        function SearchMenu() {
            var input, filter, ul, li, a, i;
            input = document.getElementById("mySearch");
            filter = input.value.toUpperCase();
            ul = document.getElementById("sidenav");
            li = ul.getElementsByTagName("li");
            for (i = 0; i < li.length; i++) {
                a = li[i].getElementsByTagName("a")[0];
                if (a.innerHTML.toUpperCase().indexOf(filter) > -1) {
                    li[i].style.display = "";
                } else {
                    li[i].style.display = "none";
                }
            }
        }
    </script>

    <!--End of search forms and Logo-->
    <!--End of inner top menu-->
    <!--End of inner top menu-->
    <!--Start of bread crumbs-->
    <div id="bread_cram" style="display:none;">
        <div style="display:inline;">
            @if (@Request.QueryString["n1_name"] != null)
            {
                <span>  @Request.QueryString["n1_name"]</span>
            }
            else
            {
                <span>Home</span>
            }

            @if (Request.RawUrl.Contains("Edit"))
            {
                <span>&rarr;Edit</span>
            }
            @if (@Request.QueryString["img"] != null)
            {
                if (@Request.QueryString["img"] != "")
                {
                    <img src="~/attachments/risources/displayImage/@Request.QueryString["img"]" style="width:50px;height:50px;" />
                }
            }
            @if (Request.QueryString["n2_name"] != null)
            {
                if (Request.QueryString["n2_name"] != "")
                {
                    <span style="color:lightblue;">&rarr;@Request.QueryString["n2_name"]</span>
                }
            }
            @if (Request.QueryString["cat_name"] != null)
            {
                if (Request.QueryString["cat_name"] != "")
                {
                    <span style="color:lightblue;">&rarr;@Request.QueryString["cat_name"]</span>
                }
            }
            @if (Request.QueryString["prod_name"] != null)
            {
                if (Request.QueryString["prod_name"] != "")
                {
                    <span style="color:lightblue;">&rarr;@Request.QueryString["prod_name"]</span>
                }
            }
            @if (Request.QueryString["ind_name"] != null)
            {
                if (Request.QueryString["ind_name"] != "")
                {
                    <span style="color:lightblue;">&rarr;@Request.QueryString["ind_name"]</span>
                }
            }
            @if (Request.QueryString["n3_name"] != null)
            {
                <span style="color:lightblue;">&rarr;@Request.QueryString["n3_name"]</span>
            }
            @if (Request.QueryString["msg"] != null)
            {
                <span style="color:lightblue;">&rarr;@Request.QueryString["msg"]</span>
            }
            @if (@ViewBag.model != null)
            {
                <span style="color:lightblue;">&rarr;@ViewBag.model</span>
            }
            @if (Request.RawUrl.Contains("search"))
            {
                <a style="float:right;margin-left:20px;color:#E50043;font-size:12px;font-weight:600;" href="~/search/index?onlySalesComm=&onlyRiSource=&onlyUsers=&onlyPartComp=&onlyPartLoc=&msg=&n1_name=You+Searched+for&all="><span class="glyphicon glyphicon-refresh"></span> Reset</a>
            }
        </div>
    </div>
    <!--End of bread crams-->
    <!-- Start of Announcements-->
    <div>
        @if (!Request.RawUrl.Contains("Announcements"))
        {
            <script>
                //handle site announcements
                announ = {
                    init: function () {
                        var closeit = $(".closeit"), announcement_placeholder = $("#announcement_placeholder"), announcement = $('#announcement');

                        $.post("/Announcements/getAnnouncement", function (results) {
                            announcement.hide();
                            page = window.location.href;
                            if (results.pages != null) {
                                var pages = results.pages.split(",");
                                $.each(pages, function (i, v) {
                                    if (page.search(v) > 0 || results.pages == "all" || results.pages == null) {
                                        if (results.hide == "show") {
                                            announcement.show();
                                            announcement_placeholder.html(results.message);
                                            closeit.attr("id", results.ID);
                                        }
                                    }
                                });
                            } else {
                                if (page.search(results.pages) > 0 || results.pages == "all" || results.pages == null) {
                                    if (results.hide == "show") {
                                        announcement.show();
                                        announcement_placeholder.html(results.message);
                                        closeit.attr("id", results.ID);
                                    }
                                }
                            }
                        });

                        closeit.click(function () {
                            var link = "/Announcements/getAnnouncement/?announcementID=" + this.id;
                            $.post(link, function (results) {
                                if (results == 'hideAnnouncement') {
                                    announcement.html("");
                                    announcement.hide();
                                } else {
                                    alert("Something went wrong. Refresh this page.");
                                }
                            });
                        });
                    }
                }
                jQuery(document).ready(announ.init);
            </script>
        }
        else
        {
            <script>
                //handle site announcements preview
                announ = {
                    init: function () {
                        var closeit = $(".closeit"), announcement_placeholder = $("#announcement_placeholder"), announcement = $('#announcement');

                        $.post("/Announcements/getAnnouncement/?preview=1", function (results) {
                            announcement.hide();

                            if (results.hide == "show") {
                                announcement.show();
                                announcement_placeholder.html(results.message);
                                closeit.attr("id", results.ID);
                            }
                        });

                        closeit.click(function () {
                            announcement_placeholder.html("");
                            announcement.hide();
                        });
                    }
                }
                jQuery(document).ready();

            </script>
        }
        <script>
            tutorial = {
                tour: function () {
                    var tour_closeit = $(".tour_closeit"), tour_placeholder = $("#tour_placeholder"), tour = $('#tour');
                    tour.show();
                    tour_placeholder.html('<h1 style="text-align: center;"><strong>Take a tour- Site Tutorial</strong></h1> <p style="text-align: center;"><iframe src="https://www.youtube.com/embed/5Na1JoCw52o" width="100%" height="515" frameborder="0" allowfullscreen="allowfullscreen"></iframe></p> ');
                    tour_closeit.click(function () {
                        tour_placeholder.html("");
                        tour.hide();
                    });
                }
            }


        </script>

        <div style="width: 100%;margin-right: auto;margin-left: auto;text-align: left;background-color:#fff;color:black;z-index: 2;margin-top: 0px;position: relative;display:none;" id="announcement">
            <span class="closeit">X</span>
            <div style="width:80%;margin-right: auto;margin-left: auto;margin-bottom:10px;margin-top:10px;" id="announcement_placeholder"></div>
        </div>
        <div style="width: 100%;margin-right: auto;margin-left: auto;text-align: left;background-color:#fff;color:black;z-index: 2;margin-top: 0px;position: relative;display:none;" id="tour">
            <span class="tour_closeit">X</span>
            <div style="width:80%;margin-right: auto;margin-left: auto;margin-bottom:10px;margin-top:10px;" id="tour_placeholder"></div>
        </div>
    </div>
    <!--End of Announcements-->
</div><!--End header-->
